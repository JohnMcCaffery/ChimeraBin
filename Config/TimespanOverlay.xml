<Overlay Width="1920" Height="1080" >
  <Any>
    <Features>
      <Feature Factory="Image" Name="HelpSidebarAvatar"  X="50" Y="150" Window="MainWindow" >Images/Misc/HelpSidebarAvatar.png</Feature>
      <Feature Factory="Image" Name="HelpSidebarFlycam"  X="50" Y="150" Window="MainWindow" >Images/Misc/HelpSidebarFlycam.png</Feature>
    </Features>
    
    <SelectionRenderers>
      <Renderer Factory="Cursor" Name="DialCursor" InnerRenderer="Dial" Radius="40" Colour="Red" Window="MainWindow" />
    </SelectionRenderers>

    <TransitionStyles>
			<Transition Factory="BitmapTransition" Name="BitmapFade" Length="2000" Style="Fade" />
			<Transition Factory="OpacityTransition" Name="FadeOut" Length="2000" FadeOut="true" />
			<Transition Factory="OpacityTransition" Name="FadeIn" Length="2000" FadeOut="false" />
		</TransitionStyles>

		<States>
			<State Factory="Blank" Name="Splash" Start="true">
        <Features>
          <Feature Name="SplashSkeleton" Window="MainWindow" />
          <Feature Factory="Image" X="0" Y="0" W="1920" H="1080" Window="MainWindow">Images/MenuBGs/Caen-Splash.png</Feature>
        </Features>
			</State>

			<State Factory="Flythrough" Name="Idle" File="/Flythroughs/Caen-long.xml" Idle="true">
			<!--<State Factory="Flythrough" Name="Idle" File="Flythroughs/Caen-long.xml" Splash="true">-->
        <Triggers>
          <Trigger Name="IdleTrigger" />
        </Triggers>
				<IdleTransition Name="FadeOut" />
			</State>

			<State Factory="Slideshow" Name="Slideshow" Folder="Images/TodaySlideshow/" Transition="Fade" >
				<NextTriggers>
					<ImageTrigger X="1532" Y="918"  Window="MainWindow" Renderer="DialCursor">Images/Buttons/NextTrans.png</ImageTrigger>
				</NextTriggers>
				<PrevTriggers>
					<ImageTrigger X="96" Y="918"  Window="MainWindow" Renderer="DialCursor">Images/Buttons/PrevTrans.png</ImageTrigger>
				</PrevTriggers>
			</State>

      <State Factory="Info" Name="HelpAvatar" >
        <Features>
          <Feature Name="HelpSidebarAvatar" />
          <Feature Name="HelpSkeleton" />
        </Features>
      </State>

      <State Factory="Info" Name="HelpFlycam" >
        <Features>
          <Feature Name="HelpSidebarFlycam" />
          <Feature Name="HelpSkeleton" />
        </Features>
      </State>

			<State Factory="Blank" Name="Story1Confirm"><Features><Feature Factory="Image" Window="MainWindow" X="0" Y="0" W="1920" H="1080">Images/StorytellingVideos/ConfirmDogs.png</Feature></Features></State>
			<State Factory="Blank" Name="Story2Confirm"><Features><Feature Factory="Image" Window="MainWindow" X="0" Y="0" W="1920" H="1080">Images/StorytellingVideos/ConfirmGartymore.png</Feature></Features></State>
			<State Factory="Blank" Name="Story3Confirm"><Features><Feature Factory="Image" Window="MainWindow" X="0" Y="0" W="1920" H="1080">Images/StorytellingVideos/ConfirmFrakkok.png</Feature></Features></State>
			<State Factory="Blank" Name="Story4Confirm"><Features><Feature Factory="Image" Window="MainWindow" X="0" Y="0" W="1920" H="1080">Images/StorytellingVideos/ConfirmFisherman.png</Feature></Features></State>
			<State Factory="Blank" Name="Story5Confirm"><Features><Feature Factory="Image" Window="MainWindow" X="0" Y="0" W="1920" H="1080">Images/StorytellingVideos/ConfirmWolf.png</Feature></Features></State>

			<State Factory="Video" Name="Story1" File="Videos/Dogs.m4v" FinishState="Splash" Transition="BitmapFade" Window="MainWindow" />
			<State Factory="Video" Name="Story2" File="Videos/Garyore.mp4" FinishState="Splash" Transition="BitmapFade" Window="MainWindow" />
			<State Factory="Video" Name="Story3" File="Videos/Orkney.mp4" FinishState="Splash" Transition="BitmapFade" Window="MainWindow" />
			<State Factory="Video" Name="Story4" File="Videos/Fisherman.mp4" FinishState="Splash" Transition="BitmapFade" Window="MainWindow" />
			<State Factory="Video" Name="Story5" File="Videos/Wolf.mp4" FinishState="Splash" Transition="BitmapFade" Window="MainWindow" />

			<!--
      <State Factory="Video" Name="Video" File="E:\Video\Edit\Out\vid.mpg" FinishState="None" L="310" T="310" R="790" B="590" RestartMode="true">
	<window Window="MainWindow"  Splash="True">../Images/Example/ExampleBGVideo.png</window>
	<StartTriggers>
	  <InvisibleTrigger T="310" L="310" R="790" B="590" />
	</StartTriggers>
	<StopTriggers>
	  <InvisibleTrigger T="30" L="30" R="800" B="600" />
	</StopTriggers>
	<ResetTriggers>
	  <ImageTrigger X="1000" Y="300"  AlwaysOn="false" >../Images/Example/Button.png</ImageTrigger>
	</ResetTriggers>
      </State>
      -->

      <State Factory="Flythrough" Name="GuidedTour" File="Flythroughs/Caen-Guided.xml" AutoStep="false" Loop="false" DisplaySubtitles="true" SubtitleTimeout="5">
	      <StepText Window="MainWindow" Font="Verdana" Size="50" Color="Red" Style="Bold" Colour="Red" X="50" Y="50" />
	      <Triggers>
          <ImageTrigger X="1532" Y="918"  Renderer="DialCursor" Window="MainWindow" >Images/Buttons/Next.png</ImageTrigger>
        </Triggers>

      </State>
      </States>

      <Transitions>
	      <InvisibleTransition From="Splash" To="GuidedTour"    Transition="FadeOut"    L="1080" T="415" R="1755" B="500" Window="MainWindow" Renderer="DialCursor" />
	      <InvisibleTransition From="Splash" To="Slideshow"     Transition="BitmapFade" L="1080" T="645" R="1755" B="735" Window="MainWindow" Renderer="DialCursor"/>

	      <ImageTransition From="HelpAvatar" 	To="Splash" Transition="FadeIn" X="1200" Y="900"  Window="MainWindow" Renderer="DialCursor" >Images/Buttons/MainMenu.png</ImageTransition>
	      <ImageTransition From="HelpFlycam" 	To="Splash" Transition="FadeIn" X="1200" Y="900"  Window="MainWindow" Renderer="DialCursor" >Images/Buttons/MainMenu.png</ImageTransition>

	      <Transition From="Idle" 		To="Splash" Transition="FadeIn" Trigger="SkeletonFound" />
	      <ImageTransition From="GuidedTour" 	To="Splash" Transition="FadeIn" X="96" Y="918"  Window="MainWindow" Renderer="DialCursor" >Images/Buttons/Back.png</ImageTransition>
	      <ImageTransition From="Slideshow" 	To="Splash" Transition="BitmapFade" X="864" Y="918"  Window="MainWindow" Renderer="DialCursor" >Images/Buttons/BackTrans.png</ImageTransition>

	      <InvisibleTransition From="Splash" To="Story1Confirm" 	Transition="BitmapFade" L="115" T="395" R="835" B="485" Window="MainWindow" Renderer="DialCursor" />
	      <InvisibleTransition From="Splash" To="Story2Confirm" 	Transition="BitmapFade" L="115" T="510" R="835" B="600" Window="MainWindow" Renderer="DialCursor" />
	      <InvisibleTransition From="Splash" To="Story3Confirm" 	Transition="BitmapFade" L="115" T="625" R="835" B="720" Window="MainWindow" Renderer="DialCursor" />
	      <InvisibleTransition From="Splash" To="Story4Confirm" 	Transition="BitmapFade" L="115" T="745" R="835" B="825" Window="MainWindow" Renderer="DialCursor" />
	      <InvisibleTransition From="Splash" To="Story5Confirm" 	Transition="BitmapFade" L="115" T="860" R="835" B="955" Window="MainWindow" Renderer="DialCursor" />

	      <InvisibleTransition From="Story1Confirm" To="Splash" Transition="BitmapFade" L="440" T="380" R="900" B="670" Window="MainWindow" Renderer="DialCursor" />
	      <InvisibleTransition From="Story2Confirm" To="Splash" Transition="BitmapFade" L="440" T="380" R="900" B="670" Window="MainWindow" Renderer="DialCursor" />
	      <InvisibleTransition From="Story3Confirm" To="Splash" Transition="BitmapFade" L="440" T="380" R="900" B="670" Window="MainWindow" Renderer="DialCursor" />
	      <InvisibleTransition From="Story4Confirm" To="Splash" Transition="BitmapFade" L="440" T="380" R="900" B="670" Window="MainWindow" Renderer="DialCursor" />
	      <InvisibleTransition From="Story5Confirm" To="Splash" Transition="BitmapFade" L="440" T="380" R="900" B="670" Window="MainWindow" Renderer="DialCursor" />

	      <InvisibleTransition From="Story1Confirm" To="Story1" Transition="BitmapFade" L="1075" T="380" R="1535" B="670" Window="MainWindow" Renderer="DialCursor" />
	      <InvisibleTransition From="Story2Confirm" To="Story2" Transition="BitmapFade" L="1075" T="380" R="1535" B="670" Window="MainWindow" Renderer="DialCursor" />
	      <InvisibleTransition From="Story3Confirm" To="Story3" Transition="BitmapFade" L="1075" T="380" R="1535" B="670" Window="MainWindow" Renderer="DialCursor" />
	      <InvisibleTransition From="Story4Confirm" To="Story4" Transition="BitmapFade" L="1075" T="380" R="1535" B="670" Window="MainWindow" Renderer="DialCursor" />
	      <InvisibleTransition From="Story5Confirm" To="Story5" Transition="BitmapFade" L="1075" T="380" R="1535" B="670" Window="MainWindow" Renderer="DialCursor" />
      </Transitions>
  </Any>

  <!-- Settings specific to the overlay being instantiated based on click interactions -->

  <ClickBased>
	  <States>

	  </States>
	  <Transitions>

	  </Transitions>
  </ClickBased>

  <!-- Settings specific to the overlay being instantiated based on hover interactions -->

  <HoverBased>

    <Triggers>
      <Trigger Factory="SkeletonLost" Timeout="30000" Name="IdleTrigger" />
      <Trigger Factory="SkeletonFound" Name="SkeletonFound" />
      <Trigger Factory="RaiseArm" Name="ExitExplore" />
    </Triggers>

    <Features>
        <Feature Factory="Skeleton" Name="SplashSkeleton" L="940" R="1470" T="1000" Scale="100" Window="MainWindow" />
        <Feature Factory="Skeleton" Name="ExploreSkeleton" X="60" Y="1020" W="1850" Scale="100" Window="MainWindow" />
        <Feature Factory="Skeleton" Name="HelpSkeleton" X="125" Y="140.5" W="0" Scale="125" Window="MainWindow" />
    </Features>
	  <States>

      <State Factory="KinectControl" Name="KinectAvatar" Avatar="true" >
        <Features>
          <Feature Name="ExploreSkeleton" />
        </Features>
      </State>

      <State Factory="KinectControl" Name="KinectFlycam" Avatar="false" X="600" Y="500" Z="60" Pitch="0" Yaw="-90" >
        <Features>
          <Feature Name="ExploreSkeleton" Window="MainWindow"/>
        </Features>
      </State>

	  </States>
	  <Transitions>

        <InvisibleTransition From="Splash" To="KinectAvatar"  Transition="FadeOut"    L="1080" T="535" R="1755" B="620" Window="MainWindow" Renderer="DialCursor" />
	      <InvisibleTransition From="Splash" To="KinectFlycam"  Transition="FadeOut"    L="1080" T="765" R="1755" B="865" Window="MainWindow" Renderer="DialCursor" /> 

        <Transition From="KinectAvatar" To="HelpAvatar"  Transition="FadeIn" Trigger="ExitExplore" />
	      <Transition From="KinectFlycam" To="HelpFlycam"  Transition="FadeIn" Trigger="ExitExplore" /> 

	      <ImageTransition From="HelpAvatar" 	To="KinectAvatar" Transition="FadeIn" X="1600" Y="900"  Window="MainWindow" Renderer="DialCursor" >Images/Buttons/HelpToWorld.png</ImageTransition>
	      <ImageTransition From="HelpFlycam" 	To="KinectFlycam" Transition="FadeIn" X="1600" Y="900"  Window="MainWindow" Renderer="DialCursor" >Images/Buttons/HelpToWorld.png</ImageTransition>
	  </Transitions>
  </HoverBased>
</Overlay>
